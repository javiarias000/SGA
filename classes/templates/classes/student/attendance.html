{% extends 'classes/base_student.html' %}

{% block title %}Mi Asistencia{% endblock %}

{% block content %}
<h1 class="page-title">✅ Mi Asistencia</h1>
<p class="page-subtitle">Control de asistencia a clases</p>

<!-- ESTADÍSTICAS DE ASISTENCIA -->
<div class="stats-grid">
    <div class="stat-card" style="background: linear-gradient(135deg, #D1FAE5 0%, #A7F3D0 100%); border-color: #10B981;">
        <div class="stat-icon">✅</div>
        <div class="stat-value" style="color: #059669;">{{ presente }}</div>
        <div class="stat-label" style="color: #065F46;">Presente</div>
    </div>
    
    <div class="stat-card" style="background: linear-gradient(135deg, #FEE2E2 0%, #FECACA 100%); border-color: #EF4444;">
        <div class="stat-icon">❌</div>
        <div class="stat-value" style="color: #DC2626;">{{ ausente }}</div>
        <div class="stat-label" style="color: #991B1B;">Ausente</div>
    </div>
    
    <div class="stat-card" style="background: linear-gradient(135deg, #FEF3C7 0%, #FDE68A 100%); border-color: #F59E0B;">
        <div class="stat-icon">⏰</div>
        <div class="stat-value" style="color: #D97706;">{{ tardanza }}</div>
        <div class="stat-label" style="color: #92400E;">Tardanza</div>
    </div>
    
    <div class="stat-card" style="background: linear-gradient(135deg, #E0E7FF 0%, #C7D2FE 100%); border-color: #6366F1;">
        <div class="stat-icon">📊</div>
        <div class="stat-value" style="color: #4F46E5;">{{ presente_pct|floatformat:1 }}%</div>
        <div class="stat-label" style="color: #3730A3;">% Asistencia</div>
    </div>
</div>

<!-- REGISTRO DETALLADO -->
<div style="margin-top: 40px;">
    <h2 style="color: #1F2937; font-size: 1.5em; margin-bottom: 20px;">📅 Registro Detallado</h2>
    
    <div style="display: grid; gap: 10px;">
        {% for attendance in attendances %}
        <div style="background: white; border: 2px solid #E5E7EB; border-radius: 12px; padding: 20px; display: flex; justify-content: space-between; align-items: center;">
            <div>
                <h3 style="color: #1F2937; margin-bottom: 5px;">{{ attendance.date|date:"l, d F Y" }}</h3>
                {% if attendance.notes %}
                <p style="color: #6B7280; font-size: 0.9em; margin-top: 5px;">{{ attendance.notes }}</p>
                {% endif %}
            </div>
            <span style="padding: 10px 20px; border-radius: 12px; font-weight: bold;
                {% if attendance.status == 'Presente' %}background: #D1FAE5; color: #065F46;
                {% elif attendance.status == 'Ausente' %}background: #FEE2E2; color: #991B1B;
                {% elif attendance.status == 'Tardanza' %}background: #FEF3C7; color: #92400E;
                {% else %}background: #DBEAFE; color: #1E40AF;{% endif %}">
                {% if attendance.status == 'Presente' %}✅
                {% elif attendance.status == 'Ausente' %}❌
                {% elif attendance.status == 'Tardanza' %}⏰
                {% else %}📝{% endif %}
                {{ attendance.status }}
            </span>
        </div>
        {% empty %}
        <p style="color: #6B7280; text-align: center; padding: 60px;">No hay registros de asistencia</p>
        {% endfor %}
    </div>
</div>
{% endblock %}
